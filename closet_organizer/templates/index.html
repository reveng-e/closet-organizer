{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
	<title>My Closet Organizer</title>

	<!-- Google Fonts - Exo 2 -->
	<link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100..900;1,100..900&display=swap"
		rel="stylesheet" />

	<!-- Tailwind CSS CDN -->
	<script src="https://cdn.tailwindcss.com"></script>

	<!-- Custom Styles -->
	{% load static %}
	<link rel="stylesheet" href="{% static 'styles.css' %}">
</head>

<body class="min-h-screen flex items-center justify-center py-8 bg-gray-100 dark:bg-gray-900 dark:text-gray-100">

	<div class="container bg-pink-200 p-8 rounded-xl shadow-lg flex flex-col lg:flex-row gap-8">
		<!-- Cat Container -->
		<div class="cat-container">
			<img src="{% static 'images/kitty.gif' %}" alt="Sleeping Cat" />
		</div>

		<!-- Input Section -->
		<div class="w-full lg:w-1/3 card">
			<h2 class="text-3xl font-extrabold text-gray-800 mb-6 text-center">Add New Item</h2>

			<!-- Loading Indicator -->
			<div id="loadingIndicator" class="hidden text-center text-blue-600 mb-4">
				<svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none"
					viewBox="0 0 24 24">
					<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
					<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
				</svg>
				Loading...
			</div>

			<!-- Message Box -->
			<div id="messageBox"
				class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4"
				role="alert">
				<strong class="font-bold">Success!</strong>
				<span class="block sm:inline" id="messageText"></span>
				<span class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer"
					onclick="document.getElementById('messageBox').classList.add('hidden');">
					<svg class="fill-current h-6 w-6 text-green-500" role="button" xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 20 20">
						<title>Close</title>
						<path
							d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.15a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.15 2.758 3.15a1.2 1.2 0 0 1 0 1.698z" />
					</svg>
				</span>
			</div>

			<!-- Form -->
			<form id="itemForm" class="space-y-4">
				<div>
					<label for="itemName" class="block text-sm font-medium text-gray-700 mb-1">Item Name:</label>
					<input type="text" id="itemName" name="itemName" required placeholder="e.g., Blue Jeans"
						class="block w-full text-gray-700 mt-1 p-2 border border-gray-300 rounded-lg" />
				</div>

				<div>
					<label for="itemCategory" class="block text-sm font-medium text-gray-700 mb-1">Category:</label>
					<select id="itemCategory" name="itemCategory" class="block w-full text-gray-700 mt-1" required>
						<option value="">Select a Category</option>
						<option value="Shirt">Shirt</option>
						<option value="Pants">Pants</option>
						<option value="Hoodie">Hoodie</option>
						<option value="Jacket">Jacket</option>
						<option value="Dress">Dress</option>
						<option value="Skirt">Skirt</option>
						<option value="Shoes">Shoes</option>
						<option value="Accessory">Accessory</option>
						<option value="Other">Other</option>
					</select>
				</div>

				<div>
					<label for="itemDescription" class="block text-sm font-medium text-gray-700 mb-1">Description
						(Optional):</label>
					<textarea id="itemDescription" name="itemDescription" rows="5"
						class="block w-full text-gray-700 mt-1 p-2 border border-gray-300 rounded-lg"
						placeholder="e.g., Levi's 501, dark wash"></textarea>
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Upload Image (Optional):</label>
					<div id="uploadArea" class="upload-area" onclick="document.getElementById('imageInput').click()">
						<input type="file" id="imageInput" accept="image/*" style="display: none;">
						<div id="uploadContent">
							<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none"
								viewBox="0 0 48 48">
								<path
									d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
									stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
							</svg>
							<p class="mt-2 text-sm text-gray-600">
								<span class="font-medium text-blue-600 hover:text-blue-500">Click to upload</span>
								or drag and drop
							</p>
							<p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
						</div>
						<div id="imagePreview" class="hidden">
							<img id="previewImg" class="mx-auto h-20 w-20 object-cover rounded-lg">
							<p class="mt-2 text-sm text-green-600">Image ready to upload</p>
							<button type="button" onclick="clearImage()"
								class="mt-1 text-xs text-red-600 hover:text-red-800">Remove</button>
						</div>
					</div>
				</div>

				<button type="submit"
					class="w-full flex items-center justify-center bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-transform transform hover:scale-105">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"
						stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
					</svg>
					Add Item
				</button>
			</form>

			<div id="userIdDisplay" class="mt-6 text-sm text-gray-600 text-center"></div>
		</div>

		<!-- Display Section -->
		<div class="w-full lg:w-2/3 card">
			<h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">My Closet</h2>
			<div class="space-y-4" id="closetItemsDisplay">
				{% if items %}
					{% for item in items %}
						<div class="p-4 bg-white rounded-lg shadow-md">
							<h3 class="text-lg font-bold text-gray-800">{{ item.name }}</h3>
							<p class="text-sm text-gray-600">{{ item.category }}</p>
							<p class="text-sm text-gray-500">{{ item.description }}</p>
						</div>
					{% endfor %}
				{% else %}
					<p id="noItemsMessage" class="text-gray-500 text-center">
						No items added yet. Start by adding some!
					</p>
				{% endif %}
			</div>
		</div>
	</div>

	<!-- Custom JavaScript -->
	<script src="{% static 'script.js' %}"></script>
</body>

</html>